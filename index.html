<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BINGO</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@700&family=M+PLUS+Rounded+1c:wght@800&family=Kosugi+Maru&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        :root {
            --color-bg-dark-purple: #3a1c6a;
            --color-bg-light-purple: #3a1c6a;
            --color-pop-pink: #ff69b4;
            --color-pop-blue: #00ffff;
            --color-pop-yellow: #ffee00;
            --color-pop-green: #00ff7f;
            --color-text-white: #fff;
            --color-text-dark: #333;
            --shadow-text-number: 6px 6px 0 #ff69b4, 9px 9px 0 rgba(0, 0, 0, .5);
            --shadow-element: 4px 4px 0 #00ffff, 7px 7px 0 rgba(0, 0, 0, .3);
            --font-numbers: 'Chakra Petch', sans-serif;
            --font-japanese: 'Kosugi Maru', 'M PLUS Rounded 1c', sans-serif;
        }
        body {
            font-family: var(--font-japanese);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--color-bg-dark-purple), var(--color-bg-light-purple));
            background-size: 250% 250%;
            animation: gradient-shift 12s ease infinite alternate;
            color: var(--color-text-white);
            overflow: hidden;
            position: relative;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, .3);
        }
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .background-shapes {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }
        .shape {
            opacity: .5;
            animation: move-and-scale-shape 20s infinite linear;
            will-change: transform, opacity;
        }
        .shape.circle { background-color: var(--color-pop-yellow); border-radius: 50%; }
        .shape.square { background-color: var(--color-pop-green); transform: rotate(45deg); }
        .shape.triangle { width: 0; height: 0; border-left: 75px solid transparent; border-right: 75px solid transparent; border-bottom: 120px solid var(--color-pop-pink); }
        .shape.hexagon { background-color: var(--color-pop-blue); width: 120px; height: 69px; position: relative; }
        .shape.hexagon::before, .shape.hexagon::after { content: ""; position: absolute; width: 0; height: 0; border-left: 60px solid transparent; border-right: 60px solid transparent; }
        .shape.hexagon::before { bottom: 100%; border-bottom: 34.5px solid var(--color-pop-blue); }
        .shape.hexagon::after { top: 100%; border-top: 34.5px solid var(--color-pop-blue); }
        .shape.star { background-color: var(--color-pop-pink); width: 0; height: 0; border-right: 75px solid transparent; border-left: 75px solid transparent; border-bottom: 52.5px solid var(--color-pop-pink); position: relative; transform: rotate(35deg); }
        .shape.star::before { content: ""; width: 0; height: 0; border-right: 75px solid transparent; border-left: 75px solid transparent; border-top: 52.5px solid var(--color-pop-pink); position: absolute; top: 22.5px; left: -75px; }
        .shape.diamond { background-color: var(--color-pop-yellow); width: 120px; height: 120px; transform: rotate(45deg); }
        .shape.oval { background-color: var(--color-pop-green); width: 150px; height: 90px; border-radius: 50%; }
        .shape.plus { background-color: var(--color-pop-blue); width: 120px; height: 120px; position: relative; }
        .shape.plus::before, .shape.plus::after { content: ""; background-color: var(--color-pop-blue); position: absolute; }
        .shape.plus::before { width: 100%; height: 30%; top: 35%; left: 0; }
        .shape.plus::after { width: 30%; height: 100%; top: 0; left: 35%; }
        .shape:nth-child(1) { top: 10%; left: 15%; width: 150px; height: 150px; animation-duration: 22s; }
        .shape:nth-child(2) { top: 60%; left: 80%; width: 180px; height: 180px; animation-duration: 25s; }
        .shape:nth-child(3) { top: 30%; left: 5%; width: 225px; height: 90px; animation-duration: 28s; }
        .shape:nth-child(4) { top: 85%; left: 40%; width: 135px; height: 135px; animation-duration: 20s; }
        .shape:nth-child(5) { top: 5%; left: 70%; animation-duration: 23s; }
        .shape:nth-child(6) { top: 20%; left: 40%; animation-duration: 26s; }
        .shape:nth-child(7) { top: 70%; left: 10%; animation-duration: 21s; }
        .shape:nth-child(8) { top: 45%; left: 90%; animation-duration: 24s; }
        .shape:nth-child(9) { top: 80%; left: 60%; animation-duration: 27s; }
        .shape:nth-child(10) { top: 15%; left: 55%; animation-duration: 19s; }
        @keyframes move-and-scale-shape {
            0% { transform: translate(0, 0) scale(1.5) rotate(0deg); opacity: .5; }
            25% { transform: translate(30vw, 22.5vh) scale(2.1) rotate(90deg); opacity: .6; }
            50% { transform: translate(60vw, -7.5vh) scale(1.8) rotate(180deg); opacity: .4; }
            75% { transform: translate(15vw, -30vh) scale(2.25) rotate(270deg); opacity: .7; }
            100% { transform: translate(0, 0) scale(1.5) rotate(360deg); opacity: .5; }
        }
        .bingo-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: stretch;
            gap: 20px;
            width: 98%;
            max-width: 1600px;
            height: 98vh;
            padding: 25px;
            box-sizing: border-box;
            transition: opacity .5s ease-out;
            z-index: 1;
            background-color: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            backdrop-filter: none;
            border: 4px solid var(--color-pop-pink);
            box-shadow: 0 0 15px var(--color-pop-blue), 0 0 30px var(--color-pop-green);
        }
        .bingo-container.hidden { opacity: 0; pointer-events: none; }
        .left-panel {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 25%;
            padding: 20px;
            border-radius: 25px;
            box-shadow: var(--shadow-element);
            background-color: var(--color-pop-blue);
            backdrop-filter: none;
            border: 6px solid var(--color-pop-yellow);
        }
        .right-panel {
            width: 70%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            height: 100%;
            padding: 10px;
            border-radius: 25px;
            box-shadow: var(--shadow-element);
            background-color: var(--color-pop-green);
            backdrop-filter: none;
            border: 6px solid var(--color-pop-pink);
        }
        .current-number {
            font-family: var(--font-numbers);
            font-size: clamp(6rem, 15vw, 20rem);
            font-weight: 700;
            color: var(--color-text-white);
            line-height: 1;
            text-shadow: var(--shadow-text-number);
            will-change: transform, text-shadow;
            transition: transform .3s ease-in-out;
            min-height: 1em;
        }
        @keyframes number-highlight {
            0% { transform: scale(1); text-shadow: var(--shadow-text-number); }
            50% { transform: scale(1.05); text-shadow: 8px 8px 0 var(--color-pop-yellow), 12px 12px 0 rgba(0, 0, 0, .6); }
            100% { transform: scale(1); text-shadow: var(--shadow-text-number); }
        }
        .current-number.highlight { animation: number-highlight .8s ease-in-out forwards; }
        .number-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(4vw, 1fr));
            gap: 5px;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            place-items: center;
            padding: 5px;
        }
        .number-item {
            background-color: #fff;
            border-radius: 8px;
            width: 100%;
            padding-top: 120%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: var(--font-numbers);
            font-weight: 700;
            transition: all .2s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, .1);
            font-size: clamp(0.8rem, 3.5vw, 4rem);
            border: 2px solid #fff;
            text-shadow: none;
        }
        /* 奇数番目の数字の色を黒に */
        .number-item:nth-child(odd) {
            color: black;
        }
        /* 偶数番目の数字の色をピンクに */
        .number-item:nth-child(even) {
            color: var(--color-pop-pink);
        }
        .number-item span {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .number-item.drawn {
            background-color: var(--color-pop-pink);
            color: var(--color-text-white);
            border: 3px solid var(--color-pop-yellow);
            box-shadow: 0 0 15px var(--color-pop-yellow), 0 0 25px var(--color-pop-blue);
            text-shadow: none;
            margin: 5px;
        }
        .number-item.highlight-drawn {
            animation: pop-pulse 1.5s ease-in-out infinite alternate;
        }
        @keyframes pop-pulse {
            0% { transform: scale(1.05); }
            100% { transform: scale(1.1); }
        }
        .game-over-display {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, var(--color-bg-dark-purple), var(--color-bg-light-purple));
            background-size: 200% 200%;
            animation: gradient-shift 15s ease infinite alternate;
            color: var(--color-pop-pink);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: var(--font-japanese);
            font-size: 25vw;
            font-weight: 800;
            text-shadow: var(--shadow-text-number);
            opacity: 0;
            transition: opacity .8s ease-in;
            pointer-events: none;
            z-index: 100;
            letter-spacing: 5px;
        }
        .game-over-display.active { opacity: 1; }
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 99;
        }
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: var(--color-pop-pink);
            transform-origin: 50% 50%;
            animation-name: confetti-fall;
            animation-timing-function: linear;
            animation-fill-mode: forwards;
        }
        .confetti:nth-child(4n) { background-color: var(--color-pop-blue); }
        .confetti:nth-child(4n+1) { background-color: var(--color-pop-yellow); }
        .confetti:nth-child(4n+2) { background-color: var(--color-pop-green); }
        .confetti:nth-child(4n+3) { background-color: var(--color-pop-pink); }
        @keyframes confetti-fall {
            0% { transform: translate3d(0, -100px, 0) rotate(0deg); opacity: 1; }
            100% { transform: translate3d(var(--x-end), var(--y-end), 0) rotate(var(--rotate-end)); opacity: 0; }
        }
        @media (max-width: 1024px) {
            .bingo-container {
                flex-direction: column;
                height: 90vh;
                gap: 25px;
            }
            .left-panel, .right-panel {
                width: 100%;
                height: auto;
                flex: 1;
            }
            .current-number { font-size: clamp(6rem, 15vw, 10rem); }
        }
        @media (max-width: 768px) {
            .current-number { font-size: clamp(6rem, 15vw, 8rem); }
            .number-grid {
                grid-template-columns: repeat(auto-fit, minmax(6vw, 1fr));
            }
        }
        @media (max-width: 480px) {
            .current-number { font-size: clamp(6rem, 15vw, 6rem); }
            .number-grid {
                grid-template-columns: repeat(auto-fit, minmax(8vw, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="background-shapes">
        <div class="shape circle"></div>
        <div class="shape square"></div>
        <div class="shape triangle"></div>
        <div class="shape circle"></div>
        <div class="shape square"></div>
        <div class="shape hexagon"></div>
        <div class="shape star"></div>
        <div class="shape diamond"></div>
        <div class="shape oval"></div>
        <div class="shape plus"></div>
    </div>
    <div class="confetti-container" id="confettiContainer"></div>
    <div class="bingo-container" id="bingoContainer">
        <div class="left-panel">
            <div class="current-number" id="currentNumber" aria-live="polite">--</div>
        </div>
        <div class="right-panel">
            <div class="number-grid" id="numberGrid"></div>
        </div>
    </div>
    <div class="game-over-display" id="gameOverDisplay">FIN!</div>
    
    <audio id="sound1" src="https://assets.mixkit.co/sfx/preview/mixkit-game-bling-2000.mp3" preload="auto"></audio>
    <audio id="sound2" src="https://assets.mixkit.co/sfx/preview/mixkit-space-game-win-bell-514.mp3" preload="auto"></audio>
    <audio id="sound3" src="https://assets.mixkit.co/sfx/preview/mixkit-fantasy-game-over-notification-270.mp3" preload="auto"></audio>
    <audio id="sound4" src="https://assets.mixkit.co/sfx/preview/mixkit-video-game-bomb-explosion-2804.mp3" preload="auto"></audio>
    <audio id="sound5" src="https://assets.mixkit.co/sfx/preview/mixkit-ethereal-fairy-message-2601.mp3" preload="auto"></audio>
    <audio id="sound6" src="https://assets.mixkit.co/sfx/preview/mixkit-game-treasure-coin-940.mp3" preload="auto"></audio>
    <audio id="sound7" src="https://assets.mixkit.co/sfx/preview/mixkit-classic-video-game-treasure-sfx-2811.mp3" preload="auto"></audio>
    <audio id="sound8" src="https://assets.mixkit.co/sfx/preview/mixkit-fairy-game-success-bell-2598.mp3" preload="auto"></audio>
    <audio id="sound9" src="https://assets.mixkit.co/sfx/preview/mixkit-classic-action-game-shot-1981.mp3" preload="auto"></audio>
    <audio id="sound10" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-arcade-casino-notification-211.mp3" preload="auto"></audio>
    
    <script>
        const bingoGame = {
            currentNumberDisplay: document.getElementById('currentNumber'),
            numberGrid: document.getElementById('numberGrid'),
            bingoContainer: document.getElementById('bingoContainer'),
            gameOverDisplay: document.getElementById('gameOverDisplay'),
            confettiContainer: document.getElementById('confettiContainer'),
            allNumbers: Array.from({ length: 75 }, (_, i) => i + 1),
            isDrawing: false,
            lastDrawnElement: null,
            audioElements: [],

            init() {
                this.renderInitialGrid();
                this.loadAudioElements();
                this.addEventListeners();
            },

            loadAudioElements() {
                for (let i = 1; i <= 10; i++) {
                    const audio = document.getElementById(`sound${i}`);
                    if (audio) {
                        this.audioElements.push(audio);
                    }
                }
            },

            addEventListeners() {
                document.addEventListener('keydown', e => {
                    if (e.code === 'Space' && !this.isDrawing) {
                        e.preventDefault();
                        this.startDrawing();
                        this.playSound();
                    }
                });
            },

            renderInitialGrid() {
                this.allNumbers.forEach(num => {
                    const item = document.createElement('div');
                    item.className = 'number-item';
                    item.id = `number-${num}`;
                    item.innerHTML = `<span>${num}</span>`;
                    this.numberGrid.appendChild(item);
                });
            },

            startDrawing() {
                if (this.allNumbers.length === 0) {
                    this.showGameOver();
                    return;
                }
                this.isDrawing = true;
                this.currentNumberDisplay.classList.remove('highlight');
                this.createConfetti();
                this.drawNumber();
                setTimeout(() => {
                    this.isDrawing = false;
                }, 500);
            },

            drawNumber() {
                const randomIndex = Math.floor(Math.random() * this.allNumbers.length);
                const drawn = this.allNumbers.splice(randomIndex, 1)[0];
                
                this.currentNumberDisplay.textContent = drawn;
                this.currentNumberDisplay.classList.add('highlight');
                
                const drawnItem = document.getElementById(`number-${drawn}`);
                if (drawnItem) {
                    if (this.lastDrawnElement) {
                        this.lastDrawnElement.classList.remove('highlight-drawn');
                    }
                    drawnItem.classList.add('drawn');
                    drawnItem.classList.add('highlight-drawn');
                    this.lastDrawnElement = drawnItem;
                }
                
                if (this.allNumbers.length === 0) {
                    this.showGameOver();
                }
            },
            
            playSound() {
                if (this.audioElements.length === 0) return;
                const randomIndex = Math.floor(Math.random() * this.audioElements.length);
                const audio = this.audioElements[randomIndex];
                audio.currentTime = 0;
                audio.play();
            },

            createConfetti() {
                const count = 100;
                for (let i = 0; i < count; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    const x = Math.random() * 100;
                    const y = Math.random() * 100;
                    const rotate = Math.random() * 360;
                    const duration = 2 + Math.random() * 2;
                    confetti.style.left = `${x}vw`;
                    confetti.style.top = `${y}vh`;
                    confetti.style.animationDuration = `${duration}s`;
                    confetti.style.setProperty('--x-end', `${(Math.random() - 0.5) * 200}px`);
                    confetti.style.setProperty('--y-end', `100vh`);
                    confetti.style.setProperty('--rotate-end', `${(Math.random() * 720) + 360}deg`);
                    this.confettiContainer.appendChild(confetti);
                }
                setTimeout(() => {
                    this.confettiContainer.innerHTML = '';
                }, 3000);
            },

            showGameOver() {
                this.bingoContainer.classList.add('hidden');
                this.gameOverDisplay.classList.add('active');
            }
        };
        document.addEventListener('DOMContentLoaded', () => bingoGame.init());
    </script>
</body>
</html>
